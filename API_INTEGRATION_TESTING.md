# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –Ω–æ–≤—ã–º API

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è API

### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /api/daily-plan/id/1` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑–∞ —Å ID 1
- `GET /api/daily-plan/id/2` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑–∞ —Å ID 2
- `GET /api/daily-plan/id/3` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑–∞ —Å ID 3

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç API:
```javascript
{
  id: 1,                    // ID –¥–∏–∞–≥–Ω–æ–∑–∞
  code: "gastric_ulcer_exacerbation",  // –∫–æ–¥ –¥–∏–∞–≥–Ω–æ–∑–∞
  allowedFoods: ["banana", "apple"],   // —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  prohibitedFoods: ["alcohol", "coffee"], // –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  dailyPlan: [              // –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
    {
      time: "08:00",
      mealKey: "oatmeal_water_banana_weak_tea",
      ingredients: ["oatmeal", "banana", "weak_tea"],
      nutrition: {
        calories: 250,
        proteins: 8,
        fats: 3,
        carbs: 45
      }
    }
  ]
}
```

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. API Service (src/services/api.js)
- ‚úÖ `getDiagnosis(id)` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/daily-plan/id/${id}`
- ‚úÖ `getDailyPlan(diagnosisId)` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/daily-plan/id/${diagnosisId}`
- ‚úÖ –û–±–∞ –º–µ—Ç–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑–∞

### 2. DailyMenuPage (src/pages/DailyMenuPage.jsx)
- ‚úÖ –£–±—Ä–∞–ª –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –∫ `getDiagnosis()`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `getDailyPlan()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç `dailyPlan` –∏–∑ –¥–∞–Ω–Ω—ã—Ö –¥–∏–∞–≥–Ω–æ–∑–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 3. App.jsx
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `diagnosis.id` –∏ `diagnosis.code`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏–∞–≥–Ω–æ–∑–æ–≤
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∏–∞–≥–Ω–æ–∑–∞
1. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ–∑ –∏–∑ —Å–ø–∏—Å–∫–∞
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
   - –ù–µ—Ç –æ—à–∏–±–∫–∏ "No valid diagnoses with required data found"

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –º–µ–Ω—é
1. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ–∑
2. –ù–∞–∂–º–∏—Ç–µ "üçΩÔ∏è –ü—Ä–∏–º–µ—Ä –º–µ–Ω—é –Ω–∞ –¥–µ–Ω—å"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
   - –í—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏
–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
DailyMenuPage: Loaded diagnosis data: {id: 1, code: "...", ...}
DailyMenuPage: Meal 0: {time: "08:00", mealKey: "...", ...}
```

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏:
- ‚ùå "No valid diagnoses with required data found" - –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚ùå "Cannot read property of undefined" - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚ùå –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è placeholder'—ã

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –∏–∑ API
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–∏–∞–≥–Ω–æ–∑–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ –¥–∏–∞–≥–Ω–æ–∑—É
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –º–µ–Ω—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è

### ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º ID –¥–∏–∞–≥–Ω–æ–∑–∞ (1, 2, 3, ...)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫–æ–¥—ã –¥–∏–∞–≥–Ω–æ–∑–æ–≤
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ Graceful fallback –¥–ª—è –æ—à–∏–±–æ–∫

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab** - –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/daily-plan/id/X`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã** - –∫–æ–¥—ã –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ñ–∞–π–ª–∞–º –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **404 –æ—à–∏–±–∫–∞** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ URL API –≤ `config/api.js`
- **–ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- **–û—à–∏–±–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥—ã –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–∞—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

